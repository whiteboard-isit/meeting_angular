(self.webpackChunkmeetings_manager=self.webpackChunkmeetings_manager||[]).push([[317],{8317:(me,vt,M)=>{"use strict";M.r(vt),M.d(vt,{GeneralModule:()=>dt});var Zt=M(4466),te=M(6916),_t=M(6895),Rt=M(3022),A=M(4006),t=M(4650),ee=M(7274),ie=M(7009),ae=M(2553),Dt=M(9523),re=M(4763),xt=M.n(re);const Y=["image"];class K{constructor(){this.croppedImg=new t.vpe,this.imageDestination=""}ngAfterViewInit(){this.cropper=new(xt())(this.imageElement.nativeElement,{zoomable:!1,scalable:!1,aspectRatio:1,crop:()=>{const v=this.cropper.getCroppedCanvas();this.imageDestination=v.toDataURL("image/png"),this.croppedImg.emit(this.imageDestination)}})}ngOnInit(){}static#t=this.\u0275fac=function(l){return new(l||K)};static#e=this.\u0275cmp=t.Xpm({type:K,selectors:[["app-image-cropper"]],viewQuery:function(l,Z){if(1&l&&t.Gf(Y,5),2&l){let w;t.iGM(w=t.CRH())&&(Z.imageElement=w.first)}},inputs:{imageSource:["src","imageSource"]},outputs:{croppedImg:"croppedImg"},decls:5,vars:2,consts:[[1,"img-container"],["crossorigin","",3,"src"],["image",""],["id","preview-img",1,"img-preview",3,"src"],["preview",""]],template:function(l,Z){1&l&&(t.TgZ(0,"div",0),t._UZ(1,"img",1,2),t.qZA(),t._UZ(3,"img",3,4)),2&l&&(t.xp6(1),t.Q6J("src",Z.imageSource,t.LSH),t.xp6(2),t.Q6J("src",Z.imageDestination,t.LSH))},styles:[".img-container[_ngcontent-%COMP%]{width:640px;height:480px;float:left}.img-preview[_ngcontent-%COMP%]{width:200px;height:200px;float:left;margin-left:10px}"]})}var Et=M(7288),C=M(6188);const Mt=["cropper"],Yt=["preview"];function Bt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function Ht(f,v){1&f&&t._UZ(0,"span",75)}function Q(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,Bt,3,3,"span",74),t.YNc(2,Ht,1,0,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.profile_form.get("name_ar").hasError("required")),t.xp6(1),t.Q6J("ngIf",l.profile_form.get("name_ar").hasError("pattern"))}}function V(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function $(f,v){1&f&&t._UZ(0,"span",75)}function z(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,V,3,3,"span",74),t.YNc(2,$,1,0,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.profile_form.get("name_en").hasError("required")),t.xp6(1),t.Q6J("ngIf",l.profile_form.get("name_en").hasError("pattern"))}}function ot(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function st(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,ot,3,3,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.profile_form.get("birth_date").hasError("required"))}}function lt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function ct(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"adminstration.this_element_contains_9_numbers")," "))}function Nt(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,lt,3,3,"span",74),t.YNc(2,ct,3,3,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.profile_form.get("mobile").hasError("required")),t.xp6(1),t.Q6J("ngIf",l.profile_form.get("mobile").hasError("pattern"))}}function jt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function q(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,jt,3,3,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.profile_form.get("gender").hasError("required"))}}function zt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function ne(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,zt,3,3,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.profile_form.get("linkedin_link").hasError("required"))}}function bt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function It(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,bt,3,3,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.profile_form.get("twitter_link").hasError("required"))}}function ht(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function wt(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,ht,3,3,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.account_form.get("username").hasError("required"))}}function Pt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function Jt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"adminstration.emailFormat")," "))}function Xt(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,Pt,3,3,"span",74),t._UZ(2,"br"),t.YNc(3,Jt,3,3,"span",74),t._UZ(4,"br"),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.account_form.get("email").hasError("required")),t.xp6(2),t.Q6J("ngIf",l.account_form.get("email").hasError("email"))}}function Lt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function Ot(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,Lt,3,3,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.password_form.get("old_password").hasError("required"))}}function kt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function qt(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,kt,3,3,"span",74),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.password_form.get("password").hasError("required"))}}function Qt(f,v){1&f&&(t.TgZ(0,"span",75),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"meeting_manager.this_item_is_required")," "))}function oe(f,v){1&f&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&f&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"adminstration.password_does_not_match")," "))}function se(f,v){if(1&f&&(t.TgZ(0,"span"),t.YNc(1,Qt,3,3,"span",74),t.YNc(2,oe,3,3,"span",38),t.qZA()),2&f){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.password_form.get("password_confirmation").hasError("required")),t.xp6(1),t.Q6J("ngIf",l.password_form.get("password_confirmation").hasError("wrongPassword"))}}const W=function(f){return{"is-invalid border-danger":f}},tt=function(f){return{"is-invalid border border-danger":f}};function Vt(f,v){if(1&f){const l=t.EpF();t.ynx(0),t.TgZ(1,"ul",4)(2,"li",5)(3,"a",6),t._UZ(4,"i",7),t.TgZ(5,"span",8),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"li",5)(9,"a",9),t._UZ(10,"i",10),t.TgZ(11,"span",8),t._uU(12),t.ALo(13,"translate"),t.qZA()()(),t.TgZ(14,"li",5)(15,"a",11),t._UZ(16,"i",12),t.TgZ(17,"span",8),t._uU(18),t.ALo(19,"translate"),t.qZA()()()(),t.TgZ(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",16)(24,"div",17)(25,"form",18),t.NdJ("ngSubmit",function(){t.CHM(l);const w=t.oxw();return t.KtG(w.submitProfileFormHandler())}),t.TgZ(26,"div",19)(27,"label",20),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",21)(31,"div",22),t._UZ(32,"img",23),t.TgZ(33,"div",24)(34,"div",25),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"input",26),t.NdJ("change",function(w){t.CHM(l);const it=t.oxw();return t.KtG(it.handleUpload(w))}),t.qZA()()()()(),t.TgZ(38,"div",19)(39,"label",20),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",21)(43,"div",27)(44,"div",28)(45,"button",29),t._UZ(46,"img",30),t.qZA(),t.TgZ(47,"div",31)(48,"a",32),t.NdJ("click",function(){t.CHM(l);const w=t.oxw();return t.KtG(w.changeCurrentLang("en","assets/img/united-states-flag.svg"))}),t._UZ(49,"img",33),t._uU(50," \u0627\u0644\u0623\u0646\u062c\u0644\u064a\u0632\u064a\u0629 "),t.qZA(),t.TgZ(51,"a",34),t.NdJ("click",function(){t.CHM(l);const w=t.oxw();return t.KtG(w.changeCurrentLang("ar","assets/img/saudi-arabia-flag.svg"))}),t._UZ(52,"img",35),t._uU(53," \u0627\u0644\u0639\u0631\u0628\u064a\u0629 "),t.qZA()()()()()(),t.TgZ(54,"div",19)(55,"label",20),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"div",36),t._UZ(59,"input",37),t.ALo(60,"translate"),t.YNc(61,Q,3,2,"span",38),t.qZA()(),t.TgZ(62,"div",19)(63,"label",20),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"div",36),t._UZ(67,"input",39),t.ALo(68,"translate"),t.YNc(69,z,3,2,"span",38),t.qZA()(),t.TgZ(70,"div",19)(71,"label",20),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"div",36),t._UZ(75,"input",40),t.ALo(76,"translate"),t.YNc(77,st,2,1,"span",38),t.qZA()(),t.TgZ(78,"div",19)(79,"label",20),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"div",36),t._UZ(83,"input",41),t.ALo(84,"translate"),t.YNc(85,Nt,3,2,"span",38),t.qZA()(),t.TgZ(86,"div",19)(87,"label",20),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"div",36)(91,"select",42)(92,"option",43),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.TgZ(95,"option",44),t._uU(96),t.ALo(97,"translate"),t.qZA()(),t.YNc(98,q,2,1,"span",38),t.qZA()(),t.TgZ(99,"div",19)(100,"label",20),t._uU(101),t.ALo(102,"translate"),t.qZA(),t.TgZ(103,"div",36)(104,"div",45)(105,"div",46)(106,"span",47),t._UZ(107,"i",48),t.qZA()(),t._UZ(108,"input",49),t.ALo(109,"translate"),t.qZA(),t.YNc(110,ne,2,1,"span",38),t.qZA()(),t.TgZ(111,"div",19)(112,"label",20),t._uU(113),t.ALo(114,"translate"),t.qZA(),t.TgZ(115,"div",36)(116,"div",45)(117,"div",46)(118,"span",47),t._UZ(119,"i",50),t.qZA()(),t._UZ(120,"input",51),t.ALo(121,"translate"),t.qZA(),t.YNc(122,It,2,1,"span",38),t.qZA()(),t.TgZ(123,"div",52)(124,"div",53)(125,"button",54),t._uU(126),t.ALo(127,"translate"),t.qZA()()()()()()()(),t.TgZ(128,"div",55)(129,"div",15)(130,"div",17)(131,"form",56),t.NdJ("ngSubmit",function(){t.CHM(l);const w=t.oxw();return t.KtG(w.submitAccountFormHandler())}),t.TgZ(132,"div",19)(133,"label",57),t._uU(134),t.ALo(135,"translate"),t.qZA(),t.TgZ(136,"div",58),t._UZ(137,"input",59),t.ALo(138,"translate"),t.YNc(139,wt,2,1,"span",38),t.qZA()(),t.TgZ(140,"div",19)(141,"label",57),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"div",58)(145,"div",45)(146,"div",46)(147,"span",47),t._UZ(148,"i",60),t.qZA()(),t._UZ(149,"input",61),t.ALo(150,"translate"),t.qZA(),t.YNc(151,Xt,5,2,"span",38),t.qZA()(),t.TgZ(152,"div",52)(153,"div",53)(154,"button",62),t._uU(155),t.ALo(156,"translate"),t.qZA()()()()()()(),t.TgZ(157,"div",63)(158,"div",15)(159,"div",64)(160,"form",65),t.NdJ("ngSubmit",function(){t.CHM(l);const w=t.oxw();return t.KtG(w.submitPasswordForm())}),t.TgZ(161,"div",17)(162,"div",19)(163,"label",66),t._uU(164),t.ALo(165,"translate"),t.qZA(),t.TgZ(166,"div",67),t._UZ(167,"input",68),t.YNc(168,Ot,2,1,"span",38),t.qZA()(),t.TgZ(169,"div",19)(170,"label",66),t._uU(171),t.ALo(172,"translate"),t.qZA(),t.TgZ(173,"div",67)(174,"div",45),t._UZ(175,"input",69),t.TgZ(176,"div",70)(177,"span",71),t._UZ(178,"i",72),t.qZA()()(),t.YNc(179,qt,2,1,"span",38),t.qZA()(),t.TgZ(180,"div",19)(181,"label",66),t._uU(182),t.ALo(183,"translate"),t.qZA(),t.TgZ(184,"div",67),t._UZ(185,"input",73),t.YNc(186,se,3,2,"span",38),t.qZA()(),t.TgZ(187,"div",52)(188,"div",53)(189,"button",62),t._uU(190),t.ALo(191,"translate"),t.qZA()()()()()()()()(),t.BQk()}if(2&f){const l=t.oxw();t.xp6(6),t.hij(" ",t.lcZ(7,60,"adminstration.profile")," "),t.xp6(6),t.hij(" ",t.lcZ(13,62,"adminstration.accountData")," "),t.xp6(6),t.hij(" ",t.lcZ(19,64,"adminstration.changePassword")," "),t.xp6(7),t.Q6J("formGroup",l.profile_form),t.xp6(3),t.hij(" ",t.lcZ(29,66,"adminstration.profile_img")," "),t.xp6(4),t.Q6J("src",l.currentUser.avatarURL,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(36,68,"adminstration.ClickToChangeImage")," "),t.xp6(5),t.hij(" ",t.lcZ(41,70,"adminstration.favouriteLang")," "),t.xp6(6),t.Q6J("src",l.selectedLn,t.LSH),t.xp6(10),t.hij(" ",t.lcZ(57,72,"adminstration.fullNameAr")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(60,74,"adminstration.fullNameAr")),t.Q6J("ngClass",t.VKq(122,W,l.inValidProfileForm&&l.profile_form.get("name_ar").hasError("required"))),t.xp6(2),t.Q6J("ngIf",l.profile_form.get("name_ar").invalid&&l.profile_form.get("name_ar").touched||l.inValidProfileForm),t.xp6(3),t.hij(" ",t.lcZ(65,76,"adminstration.fullNameEn")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(68,78,"adminstration.fullNameEn")),t.Q6J("ngClass",t.VKq(124,W,l.inValidProfileForm&&l.profile_form.get("name_en").hasError("required"))),t.xp6(2),t.Q6J("ngIf",l.profile_form.get("name_en").invalid&&l.profile_form.get("name_en").touched||l.inValidProfileForm),t.xp6(3),t.hij(" ",t.lcZ(73,80,"adminstration.dateOfBirth")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(76,82,"adminstration.dateOfBirth")),t.Q6J("ngClass",t.VKq(126,W,l.inValidProfileForm&&l.profile_form.get("birth_date").hasError("required"))),t.xp6(2),t.Q6J("ngIf",l.profile_form.get("birth_date").invalid&&l.profile_form.get("birth_date").touched||l.inValidProfileForm),t.xp6(3),t.hij(" ",t.lcZ(81,84,"adminstration.MOBILE")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(84,86,"adminstration.MOBILE")),t.Q6J("ngClass",t.VKq(128,W,l.inValidProfileForm&&l.profile_form.get("mobile").hasError("required"))),t.xp6(2),t.Q6J("ngIf",l.profile_form.get("mobile").invalid&&l.profile_form.get("mobile").touched||l.inValidProfileForm),t.xp6(3),t.hij(" ",t.lcZ(89,88,"adminstration.Gender")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(130,W,l.inValidProfileForm&&l.profile_form.get("gender").hasError("required"))),t.xp6(2),t.hij(" ",t.lcZ(94,90,"adminstration.male")," "),t.xp6(3),t.hij(" ",t.lcZ(97,92,"adminstration.female")," "),t.xp6(2),t.Q6J("ngIf",l.profile_form.get("gender").invalid&&l.profile_form.get("gender").touched||l.inValidProfileForm),t.xp6(3),t.hij(" ",t.lcZ(102,94,"adminstration.linkedInLink")," "),t.xp6(7),t.s9C("placeholder",t.lcZ(109,96,"adminstration.linkedInLink")),t.Q6J("ngClass",t.VKq(132,tt,l.inValidProfileForm&&l.profile_form.get("linkedin_link").hasError("required"))),t.xp6(2),t.Q6J("ngIf",l.profile_form.get("linkedin_link").invalid&&l.profile_form.get("linkedin_link").touched||l.inValidProfileForm),t.xp6(3),t.hij(" ",t.lcZ(114,98,"adminstration.twitterLink")," "),t.xp6(7),t.s9C("placeholder",t.lcZ(121,100,"adminstration.twitterLink")),t.Q6J("ngClass",t.VKq(134,tt,l.inValidProfileForm&&l.profile_form.get("twitter_link").hasError("required"))),t.xp6(2),t.Q6J("ngIf",l.profile_form.get("twitter_link").invalid&&l.profile_form.get("twitter_link").touched||l.inValidProfileForm),t.xp6(4),t.hij(" ",t.lcZ(127,102,"adminstration.save")," "),t.xp6(5),t.Q6J("formGroup",l.account_form),t.xp6(3),t.hij(" ",t.lcZ(135,104,"adminstration.userName")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(138,106,"adminstration.userName")),t.Q6J("ngClass",t.VKq(136,tt,l.invalidAccount_form&&l.account_form.get("username").hasError("required"))),t.xp6(2),t.Q6J("ngIf",l.account_form.get("username").invalid&&l.account_form.get("username").touched||l.invalidAccount_form),t.xp6(3),t.hij(" ",t.lcZ(143,108,"adminstration.EMAIL")," "),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(150,110,"adminstration.EMAIL"),""),t.Q6J("ngClass",t.VKq(138,tt,l.invalidAccount_form&&l.account_form.get("email").hasError("required"))),t.xp6(2),t.Q6J("ngIf",l.account_form.get("email").invalid&&l.account_form.get("email").touched||l.invalidAccount_form),t.xp6(4),t.hij(" ",t.lcZ(156,112,"adminstration.save")," "),t.xp6(5),t.Q6J("formGroup",l.password_form),t.xp6(4),t.hij(" ",t.lcZ(165,114,"adminstration.currentPassword")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(140,W,l.password_form.get("old_password").hasError("required")&&l.invalidPassword_form)),t.xp6(1),t.Q6J("ngIf",l.password_form.get("old_password").invalid&&l.password_form.get("old_password").touched||l.invalidPassword_form),t.xp6(3),t.hij(" ",t.lcZ(172,116,"adminstration.newPassword")," "),t.xp6(4),t.Q6J("ngClass",t.VKq(142,tt,l.invalidPassword_form&&l.password_form.get("password").hasError("required"))),t.xp6(4),t.Q6J("ngIf",l.password_form.get("password").invalid&&l.password_form.get("password").touched||l.invalidPassword_form),t.xp6(3),t.hij(" ",t.lcZ(183,118,"adminstration.confirmPassword")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(144,W,l.password_form.get("password_confirmation").hasError("required")&&l.invalidPassword_form)),t.xp6(1),t.Q6J("ngIf",l.password_form.get("password_confirmation").invalid&&l.password_form.get("password_confirmation").touched||l.invalidPassword_form),t.xp6(4),t.hij(" ",t.lcZ(191,120,"adminstration.save")," ")}}function Wt(f,v){1&f&&t._UZ(0,"app-loading")}function Gt(f,v){if(1&f){const l=t.EpF();t.TgZ(0,"div",76)(1,"div",77)(2,"h5"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",77)(6,"app-image-cropper",78),t.NdJ("croppedImg",function(w){t.CHM(l);const it=t.oxw();return t.KtG(it.profilePicHandler(w))}),t.qZA()(),t.TgZ(7,"div",79)(8,"button",80),t.NdJ("click",function(){t.CHM(l);const w=t.oxw();return t.KtG(w.closeDialog())}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",81),t.NdJ("click",function(){t.CHM(l);const w=t.oxw();return t.KtG(w.closeDialog())}),t._uU(12),t.ALo(13,"translate"),t.qZA()()()}if(2&f){const l=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,4,"adminstration.CropImage")," "),t.xp6(3),t.Q6J("src",l.imgsrc),t.xp6(3),t.hij(" ",t.lcZ(10,6,"adminstration.save")," "),t.xp6(3),t.hij(" ",t.lcZ(13,8,"adminstration.close")," ")}}class pt{constructor(v,l,Z,w,it){this.matDialog=v,this.fb=l,this._snackBar=Z,this.authService=w,this.userService=it,this.selectedLn=localStorage.getItem("selectedLn")||"assets/img/saudi-arabia-flag.svg",this.unsubscribe=[],this.currentUser=null,this.inValidProfileForm=!1,this.invalidAccount_form=!1,this.invalidPassword_form=!1}changeCurrentLang(v,l){}ngOnInit(){this.fetchCurrentUser()}fetchCurrentUser(){this.authService.currentUser$.subscribe(v=>{this.currentUser=v,this.InitProfileForm(),this.InitAccountData(),this.InitPasswordForm()})}openDialog(v){this.dir=localStorage.getItem("direction"),console.log(v),this.matDialog.open(v,{direction:this.dir?this.dir:"rtl"})}closeDialog(){this.matDialog.closeAll()}handleUpload(v){const l=v.target.files[0],Z=new FileReader;Z.readAsDataURL(l),Z.onload=()=>{this.imgsrc=Z.result,this.openDialog(this.cropper)}}profilePicHandler(v){console.log(v)}InitProfileForm(){this.profile_form=this.fb.group({name_ar:[this.currentUser?.name_ar,[A.kI.required,A.kI.pattern("")]],name_en:[this.currentUser?.name_en,[A.kI.required,A.kI.pattern("")]],birth_date:[this.currentUser?.birth_date,[A.kI.required]],mobile:[this.currentUser?.mobile,[A.kI.required,A.kI.pattern("[-+()0-9]+")]],gender:[1==this.currentUser?.gender?"male":"female",[A.kI.required]],linkedin_link:[this.currentUser?.linkedin_link],twitter_link:[this.currentUser?.twitter_link]})}submitProfileFormHandler(){if(this.profile_form.valid){const v=this.userService.updateProfile(this.profile_form.value).subscribe(l=>{this.authService.currentUserSubject.next(l.Data.user)});this.unsubscribe.push(v)}else this.inValidProfileForm=!0}InitAccountData(){this.account_form=this.fb.group({username:[this.currentUser?.username,[A.kI.required]],email:[this.currentUser?.email,[A.kI.required,A.kI.email,A.kI.pattern(".*com$")]]})}submitAccountFormHandler(){if(this.account_form.valid){const v=this.userService.updateAcountData(this.account_form.value).subscribe(l=>{this.authService.currentUserSubject.next(l.Data.user)});this.unsubscribe.push(v)}else this.invalidAccount_form=!0}InitPasswordForm(){this.password_form=this.fb.group({old_password:[this.currentUser?.password,[A.kI.required]],password:["",[A.kI.required]],password_confirmation:["",[A.kI.required]]})}submitPasswordForm(){if(this.password_form.valid){const v=this.userService.updatePassword(this.password_form.value).subscribe(l=>{});this.unsubscribe.push(v)}else this.invalidPassword_form=!0}openSnackBar(v,l){this._snackBar.open(v,l)}ngOnDestroy(){this.unsubscribe.forEach(v=>v.unsubscribe())}static#t=this.\u0275fac=function(l){return new(l||pt)(t.Y36(ee.uw),t.Y36(A.qu),t.Y36(ie.ux),t.Y36(ae.e),t.Y36(Dt.K))};static#e=this.\u0275cmp=t.Xpm({type:pt,selectors:[["app-profile"]],viewQuery:function(l,Z){if(1&l&&(t.Gf(Mt,7),t.Gf(Yt,7)),2&l){let w;t.iGM(w=t.CRH())&&(Z.cropper=w.first),t.iGM(w=t.CRH())&&(Z.preview=w.first)}},decls:6,vars:2,consts:[[1,"container","p-5","bg-white"],[4,"ngIf","ngIfElse"],["loading",""],["cropper",""],["id","pills-tab","role","tablist",1,"nav","navi-bold","navi-hover","navi-active","navi-link-rounded","d-flex","flex-nowrap","mb-3","navs_container"],[1,"nav-item"],["id","pills-home-tab","data-toggle","pill","href","#pills-home","role","tab","aria-controls","pills-home","aria-selected","true",1,"nav-link","py-4","text-nowrap","active"],[1,"fas","fa-user","text-primary"],[1,"navi-text","font-size-lg","m-2"],["id","pills-profile-tab","data-toggle","pill","href","#pills-profile","role","tab","aria-controls","pills-profile","aria-selected","false",1,"nav-link","py-4","text-nowrap"],[1,"far","fa-address-card","text-primary"],["id","pills-contact-tab","data-toggle","pill","href","#pills-contact","role","tab","aria-controls","pills-contact","aria-selected","false",1,"nav-link","py-4","text-nowrap"],[1,"fas","fa-unlock-alt","text-primary"],["id","pills-tabContent",1,"tab-content","mt-3"],["id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",1,"tab-pane","fade","show","active"],[1,"card"],[1,"card-header","py-3"],[1,"card-body"],["id","profile-form","method","POST",1,"login-forms",3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col-xl-3","col-lg-3","col-form-label"],[1,"col-lg-9","col-xl-6"],["id","profile-image-uploader-container",1,"image-uploader-container"],["width","100%","height","100$","srcset","",3,"src"],[1,"overlay"],[1,"text-center","cursor-pointer","mt-5"],["type","file","name","image","id","upload_image_profileImage",1,"image",3,"change"],[1,"col-6"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","text-white","dropdown-toggle"],["width","20","height","20",3,"src"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","cursor-pointer"],[1,"dropdown-item",3,"click"],["with","20","height","20","src","assets/img/united-states-flag.svg",1,"mx-2"],[1,"dropdown-item","cursor-pointer",3,"click"],["with","20","height","20","src","assets/img/saudi-arabia-flag.svg",1,"mx-2"],[1,"col-lg-9","col-xl-9"],["id","name_ar","formControlName","name_ar","type","text",1,"form-control","form-control-lg","form-control-solid",3,"ngClass","placeholder"],[4,"ngIf"],["id","name_en","name","name_en","type","text","formControlName","name_en",1,"form-control","form-control-lg","form-control-solid",3,"ngClass","placeholder"],["type","date","id","birthdate","formControlName","birth_date",1,"form-control","form-control-lg","form-control-solid",3,"placeholder","ngClass"],["type","text","id","phone","formControlName","mobile",1,"form-control","form-control-lg","form-control-solid",3,"placeholder","ngClass"],["id","gender","name","gender","formControlName","gender",1,"form-control","form-control-lg","form-control-solid","pt-1",3,"ngClass"],["value","male"],["value","female"],[1,"input-group","input-group-lg","input-group-solid"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fab","fa-linkedin-in"],["id","facebook_link","type","text","formControlName","linkedin_link",1,"form-control","form-control-lg","form-control-solid",3,"ngClass","placeholder"],[1,"fab","fa-twitter"],["id","twitter_link","type","text","formControlName","twitter_link",1,"form-control","form-control-lg","form-control-solid",3,"ngClass","placeholder"],[1,"form-group","row","justify-content-end"],[1,"card-toolbar","col-md-3"],["type","submit",1,"btn","btn-success","w-100"],["id","pills-profile","role","tabpanel","aria-labelledby","pills-profile-tab",1,"tab-pane","fade"],["method","POST",1,"form","repeater-default",3,"formGroup","ngSubmit"],[1,"col-lg-2","col-form-label"],[1,"col-md-10"],["id","username","formControlName","username","type","text",1,"form-control","form-control-lg","form-control-solid",3,"placeholder","ngClass"],[1,"fas","fa-at"],["id","email","formControlName","email","type","text",1,"form-control","form-control-lg","form-control-solid",3,"ngClass","placeholder"],["type","submit",1,"btn","btn-success","mr-2","w-100"],["id","pills-contact","role","tabpanel","aria-labelledby","pills-contact-tab",1,"tab-pane","fade"],["id","kt_repeater_1",1,"card-body"],["method","POST",1,"form",3,"formGroup","ngSubmit"],[1,"col-md-3","col-form-label","text-alert"],[1,"col-md-9"],["type","password","formControlName","old_password",1,"form-control","form-control-lg","form-control-solid","mb-2",3,"ngClass"],["id","password","type","password","aria-describedby","basic-addon2","formControlName","password",1,"form-control","form-control-lg","form-control-solid","mb-2",3,"ngClass"],[1,"input-group-append"],["id","passowrdGeneratorbutton",1,"input-group-text"],["aria-hidden","true",1,"fa","fa-cogs"],["type","password","id","password_confirmation","formControlName","password_confirmation",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"row"],[1,"col-md-12"],[3,"src","croppedImg"],[1,"d-flex","justify-content-end","mb-5","mx-3","mt-5","w-100"],[1,"btn","btn-light-primary",3,"click"],[1,"btn","btn-secondary","mx-4",3,"click"]],template:function(l,Z){if(1&l&&(t.TgZ(0,"div",0),t.YNc(1,Vt,192,146,"ng-container",1),t.YNc(2,Wt,1,0,"ng-template",null,2,t.W1O),t.YNc(4,Gt,14,10,"ng-template",null,3,t.W1O),t.qZA()),2&l){const w=t.MAs(3);t.xp6(1),t.Q6J("ngIf",Z.currentUser)("ngIfElse",w)}},dependencies:[_t.mk,_t.O5,K,A._Y,A.YN,A.Kr,A.Fj,A.EJ,A.JJ,A.JL,A.sg,A.u,Et.N,C.X$],styles:["#mobile{padding-left:90px;padding-right:1rem;top:0;left:0;right:0;height:100%;position:absolute}.iti__country-list{left:0}.ltr{direction:ltr}#profile-image-uploader-container{width:117px;position:relative}#preview_profileImage{overflow:hidden;width:160px!important;height:160px;margin:10px;border:1px solid red}.overlay{position:absolute;bottom:0;left:0;right:0;background-color:#ffffff80;overflow:hidden;height:80%;transition:.5s ease;width:100%;opacity:0}#upload_image_profileImage{position:absolute;top:0;left:-135px;bottom:1px;cursor:pointer;opacity:0}.image-uploader-container:hover .overlay{opacity:1}.mat-mdc-tab-body-wrapper,.mat-mdc-tab-label-container{z-index:0!important}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{z-index:0}.mat-mdc-tab-header{background-color:#fff;padding:10px}.active{background:#eef0f8;border-radius:7px}.navs_container{overflow:auto;width:auto}::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#9ac9f9}::-webkit-scrollbar-thumb:hover{background:#1560ac}.mat-mdc-button .mdc-button__label{z-index:1;background:transparent;border:1px solid white;color:#bebebe;padding:6px;border-radius:5px}\n"],encapsulation:2})}const Ft=[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"profile",component:pt}];class et{static#t=this.\u0275fac=function(l){return new(l||et)};static#e=this.\u0275mod=t.oAB({type:et});static#i=this.\u0275inj=t.cJS({imports:[Rt.Bz.forChild(Ft),Rt.Bz]})}class dt{static#t=this.\u0275fac=function(l){return new(l||dt)};static#e=this.\u0275mod=t.oAB({type:dt});static#i=this.\u0275inj=t.cJS({imports:[_t.ez,et,Zt.m,te.q]})}},4763:function(me){me.exports=function(){"use strict";function vt(r,e){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),a.push.apply(a,i)}return a}function M(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(a),!0).forEach(function(i){A(r,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):vt(Object(a)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(a,i))})}return r}function Zt(r){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function te(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(r,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function A(r,e,a){return e in r?Object.defineProperty(r,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[e]=a,r}function t(r){return function ee(r){if(Array.isArray(r))return Dt(r)}(r)||function ie(r){if(typeof Symbol<"u"&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function ae(r,e){if(r){if("string"==typeof r)return Dt(r,e);var a=Object.prototype.toString.call(r).slice(8,-1);if("Object"===a&&r.constructor&&(a=r.constructor.name),"Map"===a||"Set"===a)return Array.from(r);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Dt(r,e)}}(r)||function re(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(r,e){(null==e||e>r.length)&&(e=r.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=r[a];return i}var xt=typeof window<"u"&&typeof window.document<"u",Y=xt?window:{},K=!(!xt||!Y.document.documentElement)&&"ontouchstart"in Y.document.documentElement,Et=!!xt&&"PointerEvent"in Y,C="cropper",Q="e",V="w",$="s",z="n",ot="ne",st="nw",lt="se",ct="sw",Nt="".concat(C,"-crop"),jt="".concat(C,"-disabled"),q="".concat(C,"-hidden"),zt="".concat(C,"-hide"),ne="".concat(C,"-invisible"),bt="".concat(C,"-modal"),It="".concat(C,"-move"),ht="".concat(C,"Action"),wt="".concat(C,"Preview"),Pt="crop",Lt="crop",Ot="cropend",kt="cropmove",qt="cropstart",Qt="dblclick",tt=Et?"pointerdown":K?"touchstart":"mousedown",Vt=Et?"pointermove":K?"touchmove":"mousemove",Wt=Et?"pointerup pointercancel":K?"touchend touchcancel":"mouseup",et="zoom",dt="image/jpeg",f=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,v=/^data:/,l=/^data:image\/jpeg;base64,/,Z=/^img|canvas$/i,ue={viewMode:0,dragMode:Pt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ne=Number.isNaN||Y.isNaN;function _(r){return"number"==typeof r&&!Ne(r)}var ge=function(e){return e>0&&e<1/0};function le(r){return typeof r>"u"}function ft(r){return"object"===Zt(r)&&null!==r}var Ie=Object.prototype.hasOwnProperty;function yt(r){if(!ft(r))return!1;try{var e=r.constructor,a=e.prototype;return e&&a&&Ie.call(a,"isPrototypeOf")}catch{return!1}}function U(r){return"function"==typeof r}var Pe=Array.prototype.slice;function ve(r){return Array.from?Array.from(r):Pe.call(r)}function N(r,e){return r&&U(e)&&(Array.isArray(r)||_(r.length)?ve(r).forEach(function(a,i){e.call(r,a,i,r)}):ft(r)&&Object.keys(r).forEach(function(a){e.call(r,r[a],a,r)})),r}var D=Object.assign||function(e){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return ft(e)&&i.length>0&&i.forEach(function(n){ft(n)&&Object.keys(n).forEach(function(o){e[o]=n[o]})}),e},Le=/\.\d*(?:0|9){12}\d*$/;function Tt(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Le.test(r)?Math.round(r*e)/e:r}var Oe=/^width|height|left|top|marginLeft|marginTop$/;function at(r,e){var a=r.style;N(e,function(i,s){Oe.test(s)&&_(i)&&(i="".concat(i,"px")),a[s]=i})}function O(r,e){if(e){if(_(r.length))return void N(r,function(i){O(i,e)});if(r.classList)return void r.classList.add(e);var a=r.className.trim();a?a.indexOf(e)<0&&(r.className="".concat(a," ").concat(e)):r.className=e}}function J(r,e){if(e){if(_(r.length))return void N(r,function(a){J(a,e)});if(r.classList)return void r.classList.remove(e);r.className.indexOf(e)>=0&&(r.className=r.className.replace(e,""))}}function At(r,e,a){if(e){if(_(r.length))return void N(r,function(i){At(i,e,a)});a?O(r,e):J(r,e)}}var qe=/([a-z\d])([A-Z])/g;function ce(r){return r.replace(qe,"$1-$2").toLowerCase()}function he(r,e){return ft(r[e])?r[e]:r.dataset?r.dataset[e]:r.getAttribute("data-".concat(ce(e)))}function Ut(r,e,a){ft(a)?r[e]=a:r.dataset?r.dataset[e]=a:r.setAttribute("data-".concat(ce(e)),a)}var _e=/\s\s*/,xe=function(){var r=!1;if(xt){var e=!1,a=function(){},i=Object.defineProperty({},"once",{get:function(){return r=!0,e},set:function(n){e=n}});Y.addEventListener("test",a,i),Y.removeEventListener("test",a,i)}return r}();function j(r,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a;e.trim().split(_e).forEach(function(n){if(!xe){var o=r.listeners;o&&o[n]&&o[n][a]&&(s=o[n][a],delete o[n][a],0===Object.keys(o[n]).length&&delete o[n],0===Object.keys(o).length&&delete r.listeners)}r.removeEventListener(n,s,i)})}function B(r,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a;e.trim().split(_e).forEach(function(n){if(i.once&&!xe){var o=r.listeners,c=void 0===o?{}:o;s=function(){delete c[n][a],r.removeEventListener(n,s,i);for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];a.apply(r,h)},c[n]||(c[n]={}),c[n][a]&&r.removeEventListener(n,c[n][a],i),c[n][a]=s,r.listeners=c}r.addEventListener(n,s,i)})}function Ct(r,e,a){var i;return U(Event)&&U(CustomEvent)?i=new CustomEvent(e,{detail:a,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,a),r.dispatchEvent(i)}function be(r){var e=r.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var pe=Y.location,Se=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function we(r){var e=r.match(Se);return null!==e&&(e[1]!==pe.protocol||e[2]!==pe.hostname||e[3]!==pe.port)}function ye(r){var e="timestamp=".concat((new Date).getTime());return r+(-1===r.indexOf("?")?"?":"&")+e}function St(r){var e=r.rotate,a=r.scaleX,i=r.scaleY,s=r.translateX,n=r.translateY,o=[];_(s)&&0!==s&&o.push("translateX(".concat(s,"px)")),_(n)&&0!==n&&o.push("translateY(".concat(n,"px)")),_(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),_(a)&&1!==a&&o.push("scaleX(".concat(a,")")),_(i)&&1!==i&&o.push("scaleY(".concat(i,")"));var c=o.length?o.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function Kt(r,e){var a=r.pageX,i=r.pageY,s={endX:a,endY:i};return e?s:M({startX:a,startY:i},s)}function rt(r){var e=r.aspectRatio,a=r.height,i=r.width,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",n=ge(i),o=ge(a);if(n&&o){var c=a*e;"contain"===s&&c>i||"cover"===s&&c<i?a=i/e:i=a*e}else n?a=i/e:o&&(i=a*e);return{width:i,height:a}}function He(r,e,a,i){var s=e.aspectRatio,n=e.naturalWidth,o=e.naturalHeight,c=e.rotate,u=void 0===c?0:c,d=e.scaleX,h=void 0===d?1:d,p=e.scaleY,m=void 0===p?1:p,b=a.aspectRatio,x=a.naturalWidth,E=a.naturalHeight,y=i.fillColor,P=void 0===y?"transparent":y,k=i.imageSmoothingEnabled,I=void 0===k||k,G=i.imageSmoothingQuality,R=void 0===G?"low":G,g=i.maxWidth,T=void 0===g?1/0:g,L=i.maxHeight,H=void 0===L?1/0:L,F=i.minWidth,mt=void 0===F?0:F,ut=i.minHeight,nt=void 0===ut?0:ut,X=document.createElement("canvas"),S=X.getContext("2d"),gt=rt({aspectRatio:b,width:T,height:H}),$t=rt({aspectRatio:b,width:mt,height:nt},"cover"),de=Math.min(gt.width,Math.max($t.width,x)),fe=Math.min(gt.height,Math.max($t.height,E)),Ce=rt({aspectRatio:s,width:T,height:H}),Ze=rt({aspectRatio:s,width:mt,height:nt},"cover"),De=Math.min(Ce.width,Math.max(Ze.width,n)),Ee=Math.min(Ce.height,Math.max(Ze.height,o)),ii=[-De/2,-Ee/2,De,Ee];return X.width=Tt(de),X.height=Tt(fe),S.fillStyle=P,S.fillRect(0,0,de,fe),S.save(),S.translate(de/2,fe/2),S.rotate(u*Math.PI/180),S.scale(h,m),S.imageSmoothingEnabled=I,S.imageSmoothingQuality=R,S.drawImage.apply(S,[r].concat(t(ii.map(function(ai){return Math.floor(Tt(ai))})))),S.restore(),X}var Te=String.fromCharCode;var ze=/^data:.*,/;function Qe(r){var a,e=new DataView(r);try{var i,s,n;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var o=e.byteLength,c=2;c+1<o;){if(255===e.getUint8(c)&&225===e.getUint8(c+1)){s=c;break}c+=1}if(s){var d=s+10;if("Exif"===function je(r,e,a){var i="";a+=e;for(var s=e;s<a;s+=1)i+=Te(r.getUint8(s));return i}(e,s+4,4)){var h=e.getUint16(d);if(((i=18761===h)||19789===h)&&42===e.getUint16(d+2,i)){var p=e.getUint32(d+4,i);p>=8&&(n=d+p)}}}if(n){var b,x,m=e.getUint16(n,i);for(x=0;x<m;x+=1)if(274===e.getUint16(b=n+12*x+2,i)){a=e.getUint16(b+=8,i),e.setUint16(b,1,i);break}}}catch{a=1}return a}var We={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,a=this.options,i=this.container,s=this.cropper,n=Number(a.minContainerWidth),o=Number(a.minContainerHeight);O(s,q),J(e,q);var c={width:Math.max(i.offsetWidth,n>=0?n:200),height:Math.max(i.offsetHeight,o>=0?o:100)};this.containerData=c,at(s,{width:c.width,height:c.height}),O(e,q),J(s,q)},initCanvas:function(){var e=this.containerData,a=this.imageData,i=this.options.viewMode,s=Math.abs(a.rotate)%180==90,n=s?a.naturalHeight:a.naturalWidth,o=s?a.naturalWidth:a.naturalHeight,c=n/o,u=e.width,d=e.height;e.height*c>e.width?3===i?u=e.height*c:d=e.width/c:3===i?d=e.width/c:u=e.height*c;var h={aspectRatio:c,naturalWidth:n,naturalHeight:o,width:u,height:d};this.canvasData=h,this.limited=1===i||2===i,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(e.width-h.width)/2,h.top=(e.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=D({},h)},limitCanvas:function(e,a){var i=this.options,s=this.containerData,n=this.canvasData,o=this.cropBoxData,c=i.viewMode,u=n.aspectRatio,d=this.cropped&&o;if(e){var h=Number(i.minCanvasWidth)||0,p=Number(i.minCanvasHeight)||0;c>1?(h=Math.max(h,s.width),p=Math.max(p,s.height),3===c&&(p*u>h?h=p*u:p=h/u)):c>0&&(h?h=Math.max(h,d?o.width:0):p?p=Math.max(p,d?o.height:0):d&&((p=o.height)*u>(h=o.width)?h=p*u:p=h/u));var m=rt({aspectRatio:u,width:h,height:p});p=m.height,n.minWidth=h=m.width,n.minHeight=p,n.maxWidth=1/0,n.maxHeight=1/0}if(a)if(c>(d?0:1)){var b=s.width-n.width,x=s.height-n.height;n.minLeft=Math.min(0,b),n.minTop=Math.min(0,x),n.maxLeft=Math.max(0,b),n.maxTop=Math.max(0,x),d&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,2===c&&(n.width>=s.width&&(n.minLeft=Math.min(0,b),n.maxLeft=Math.max(0,b)),n.height>=s.height&&(n.minTop=Math.min(0,x),n.maxTop=Math.max(0,x))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=s.width,n.maxTop=s.height},renderCanvas:function(e,a){var i=this.canvasData,s=this.imageData;if(a){var n=function Be(r){var e=r.width,a=r.height,i=r.degree;if(90==(i=Math.abs(i)%180))return{width:a,height:e};var s=i%90*Math.PI/180,n=Math.sin(s),o=Math.cos(s),c=e*o+a*n,u=e*n+a*o;return i>90?{width:u,height:c}:{width:c,height:u}}({width:s.naturalWidth*Math.abs(s.scaleX||1),height:s.naturalHeight*Math.abs(s.scaleY||1),degree:s.rotate||0}),o=n.width,c=n.height,u=i.width*(o/i.naturalWidth),d=i.height*(c/i.naturalHeight);i.left-=(u-i.width)/2,i.top-=(d-i.height)/2,i.width=u,i.height=d,i.aspectRatio=o/c,i.naturalWidth=o,i.naturalHeight=c,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,at(this.canvas,D({width:i.width,height:i.height},St({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var a=this.canvasData,i=this.imageData,s=i.naturalWidth*(a.width/a.naturalWidth),n=i.naturalHeight*(a.height/a.naturalHeight);D(i,{width:s,height:n,left:(a.width-s)/2,top:(a.height-n)/2}),at(this.image,D({width:i.width,height:i.height},St(D({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,a=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,s=Number(e.autoCropArea)||.8,n={width:a.width,height:a.height};i&&(a.height*i>a.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*s),n.height=Math.max(n.minHeight,n.height*s),n.left=a.left+(a.width-n.width)/2,n.top=a.top+(a.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=D({},n)},limitCropBox:function(e,a){var i=this.options,s=this.containerData,n=this.canvasData,o=this.cropBoxData,c=this.limited,u=i.aspectRatio;if(e){var d=Number(i.minCropBoxWidth)||0,h=Number(i.minCropBoxHeight)||0,p=c?Math.min(s.width,n.width,n.width+n.left,s.width-n.left):s.width,m=c?Math.min(s.height,n.height,n.height+n.top,s.height-n.top):s.height;d=Math.min(d,s.width),h=Math.min(h,s.height),u&&(d&&h?h*u>d?h=d/u:d=h*u:d?h=d/u:h&&(d=h*u),m*u>p?m=p/u:p=m*u),o.minWidth=Math.min(d,p),o.minHeight=Math.min(h,m),o.maxWidth=p,o.maxHeight=m}a&&(c?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(s.width,n.left+n.width)-o.width,o.maxTop=Math.min(s.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=s.width-o.width,o.maxTop=s.height-o.height))},renderCropBox:function(){var e=this.options,a=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&Ut(this.face,ht,i.width>=a.width&&i.height>=a.height?"move":"all"),at(this.cropBox,D({width:i.width,height:i.height},St({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ct(this.element,Lt,this.getData())}},Ge={initPreview:function(){var e=this.element,a=this.crossOrigin,i=this.options.preview,s=a?this.crossOriginUrl:this.url,n=e.alt||"The image to preview",o=document.createElement("img");if(a&&(o.crossOrigin=a),o.src=s,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,i){var c=i;"string"==typeof i?c=e.ownerDocument.querySelectorAll(i):i.querySelector&&(c=[i]),this.previews=c,N(c,function(u){var d=document.createElement("img");Ut(u,wt,{width:u.offsetWidth,height:u.offsetHeight,html:u.innerHTML}),a&&(d.crossOrigin=a),d.src=s,d.alt=n,d.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',u.innerHTML="",u.appendChild(d)})}},resetPreview:function(){N(this.previews,function(e){var a=he(e,wt);at(e,{width:a.width,height:a.height}),e.innerHTML=a.html,function Ue(r,e){if(ft(r[e]))try{delete r[e]}catch{r[e]=void 0}else if(r.dataset)try{delete r.dataset[e]}catch{r.dataset[e]=void 0}else r.removeAttribute("data-".concat(ce(e)))}(e,wt)})},preview:function(){var e=this.imageData,a=this.canvasData,i=this.cropBoxData,s=i.width,n=i.height,o=e.width,c=e.height,u=i.left-a.left-e.left,d=i.top-a.top-e.top;!this.cropped||this.disabled||(at(this.viewBoxImage,D({width:o,height:c},St(D({translateX:-u,translateY:-d},e)))),N(this.previews,function(h){var p=he(h,wt),m=p.width,b=p.height,x=m,E=b,y=1;s&&(E=n*(y=m/s)),n&&E>b&&(x=s*(y=b/n),E=b),at(h,{width:x,height:E}),at(h.getElementsByTagName("img")[0],D({width:o*y,height:c*y},St(D({translateX:-u*y,translateY:-d*y},e))))}))}},Fe={bind:function(){var e=this.element,a=this.options,i=this.cropper;U(a.cropstart)&&B(e,qt,a.cropstart),U(a.cropmove)&&B(e,kt,a.cropmove),U(a.cropend)&&B(e,Ot,a.cropend),U(a.crop)&&B(e,Lt,a.crop),U(a.zoom)&&B(e,et,a.zoom),B(i,tt,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&B(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&B(i,Qt,this.onDblclick=this.dblclick.bind(this)),B(e.ownerDocument,Vt,this.onCropMove=this.cropMove.bind(this)),B(e.ownerDocument,Wt,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&B(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,a=this.options,i=this.cropper;U(a.cropstart)&&j(e,qt,a.cropstart),U(a.cropmove)&&j(e,kt,a.cropmove),U(a.cropend)&&j(e,Ot,a.cropend),U(a.crop)&&j(e,Lt,a.crop),U(a.zoom)&&j(e,et,a.zoom),j(i,tt,this.onCropStart),a.zoomable&&a.zoomOnWheel&&j(i,"wheel",this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&j(i,Qt,this.onDblclick),j(e.ownerDocument,Vt,this.onCropMove),j(e.ownerDocument,Wt,this.onCropEnd),a.responsive&&j(window,"resize",this.onResize)}},Ke={resize:function(){if(!this.disabled){var c,u,e=this.options,a=this.container,i=this.containerData,s=a.offsetWidth/i.width,n=a.offsetHeight/i.height,o=Math.abs(s-1)>Math.abs(n-1)?s:n;1!==o&&(e.restore&&(c=this.getCanvasData(),u=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(N(c,function(d,h){c[h]=d*o})),this.setCropBoxData(N(u,function(d,h){u[h]=d*o}))))}},dblclick:function(){this.disabled||"none"===this.options.dragMode||this.setDragMode(function ke(r,e){return r.classList?r.classList.contains(e):r.className.indexOf(e)>-1}(this.dragBox,Nt)?"move":Pt)},wheel:function(e){var a=this,i=Number(this.options.wheelZoomRatio)||.1,s=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),e.deltaY?s=e.deltaY>0?1:-1:e.wheelDelta?s=-e.wheelDelta/120:e.detail&&(s=e.detail>0?1:-1),this.zoom(-s*i,e)))},cropStart:function(e){var a=e.buttons,i=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(_(a)&&1!==a||_(i)&&0!==i||e.ctrlKey))){var o,s=this.options,n=this.pointers;e.changedTouches?N(e.changedTouches,function(c){n[c.identifier]=Kt(c)}):n[e.pointerId||0]=Kt(e),o=Object.keys(n).length>1&&s.zoomable&&s.zoomOnTouch?"zoom":he(e.target,ht),f.test(o)&&!1!==Ct(this.element,qt,{originalEvent:e,action:o})&&(e.preventDefault(),this.action=o,this.cropping=!1,"crop"===o&&(this.cropping=!0,O(this.dragBox,bt)))}},cropMove:function(e){var a=this.action;if(!this.disabled&&a){var i=this.pointers;e.preventDefault(),!1!==Ct(this.element,kt,{originalEvent:e,action:a})&&(e.changedTouches?N(e.changedTouches,function(s){D(i[s.identifier]||{},Kt(s,!0))}):D(i[e.pointerId||0]||{},Kt(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var a=this.action,i=this.pointers;e.changedTouches?N(e.changedTouches,function(s){delete i[s.identifier]}):delete i[e.pointerId||0],a&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,At(this.dragBox,bt,this.cropped&&this.options.modal)),Ct(this.element,Ot,{originalEvent:e,action:a}))}}},$e={change:function(e){var G,i=this.canvasData,s=this.containerData,n=this.cropBoxData,o=this.pointers,c=this.action,u=this.options.aspectRatio,d=n.left,h=n.top,p=n.width,m=n.height,b=d+p,x=h+m,E=0,y=0,P=s.width,k=s.height,I=!0;!u&&e.shiftKey&&(u=p&&m?p/m:1),this.limited&&(y=n.minTop,P=(E=n.minLeft)+Math.min(s.width,i.width,i.left+i.width),k=y+Math.min(s.height,i.height,i.top+i.height));var R=o[Object.keys(o)[0]],g={x:R.endX-R.startX,y:R.endY-R.startY},T=function(H){switch(H){case Q:b+g.x>P&&(g.x=P-b);break;case V:d+g.x<E&&(g.x=E-d);break;case z:h+g.y<y&&(g.y=y-h);break;case $:x+g.y>k&&(g.y=k-x)}};switch(c){case"all":d+=g.x,h+=g.y;break;case Q:if(g.x>=0&&(b>=P||u&&(h<=y||x>=k))){I=!1;break}T(Q),(p+=g.x)<0&&(c=V,d-=p=-p),u&&(h+=(n.height-(m=p/u))/2);break;case z:if(g.y<=0&&(h<=y||u&&(d<=E||b>=P))){I=!1;break}T(z),h+=g.y,(m-=g.y)<0&&(c=$,h-=m=-m),u&&(d+=(n.width-(p=m*u))/2);break;case V:if(g.x<=0&&(d<=E||u&&(h<=y||x>=k))){I=!1;break}T(V),d+=g.x,(p-=g.x)<0&&(c=Q,d-=p=-p),u&&(h+=(n.height-(m=p/u))/2);break;case $:if(g.y>=0&&(x>=k||u&&(d<=E||b>=P))){I=!1;break}T($),(m+=g.y)<0&&(c=z,h-=m=-m),u&&(d+=(n.width-(p=m*u))/2);break;case ot:if(u){if(g.y<=0&&(h<=y||b>=P)){I=!1;break}T(z),h+=g.y,p=(m-=g.y)*u}else T(z),T(Q),g.x>=0?b<P?p+=g.x:g.y<=0&&h<=y&&(I=!1):p+=g.x,g.y<=0?h>y&&(m-=g.y,h+=g.y):(m-=g.y,h+=g.y);p<0&&m<0?(c=ct,h-=m=-m,d-=p=-p):p<0?(c=st,d-=p=-p):m<0&&(c=lt,h-=m=-m);break;case st:if(u){if(g.y<=0&&(h<=y||d<=E)){I=!1;break}T(z),h+=g.y,d+=n.width-(p=(m-=g.y)*u)}else T(z),T(V),g.x<=0?d>E?(p-=g.x,d+=g.x):g.y<=0&&h<=y&&(I=!1):(p-=g.x,d+=g.x),g.y<=0?h>y&&(m-=g.y,h+=g.y):(m-=g.y,h+=g.y);p<0&&m<0?(c=lt,h-=m=-m,d-=p=-p):p<0?(c=ot,d-=p=-p):m<0&&(c=ct,h-=m=-m);break;case ct:if(u){if(g.x<=0&&(d<=E||x>=k)){I=!1;break}T(V),d+=g.x,m=(p-=g.x)/u}else T($),T(V),g.x<=0?d>E?(p-=g.x,d+=g.x):g.y>=0&&x>=k&&(I=!1):(p-=g.x,d+=g.x),g.y>=0?x<k&&(m+=g.y):m+=g.y;p<0&&m<0?(c=ot,h-=m=-m,d-=p=-p):p<0?(c=lt,d-=p=-p):m<0&&(c=st,h-=m=-m);break;case lt:if(u){if(g.x>=0&&(b>=P||x>=k)){I=!1;break}T(Q),m=(p+=g.x)/u}else T($),T(Q),g.x>=0?b<P?p+=g.x:g.y>=0&&x>=k&&(I=!1):p+=g.x,g.y>=0?x<k&&(m+=g.y):m+=g.y;p<0&&m<0?(c=st,h-=m=-m,d-=p=-p):p<0?(c=ct,d-=p=-p):m<0&&(c=ot,h-=m=-m);break;case"move":this.move(g.x,g.y),I=!1;break;case"zoom":this.zoom(function Re(r){var e=M({},r),a=0;return N(r,function(i,s){delete e[s],N(e,function(n){var o=Math.abs(i.startX-n.startX),c=Math.abs(i.startY-n.startY),u=Math.abs(i.endX-n.endX),d=Math.abs(i.endY-n.endY),h=Math.sqrt(o*o+c*c),m=(Math.sqrt(u*u+d*d)-h)/h;Math.abs(m)>Math.abs(a)&&(a=m)})}),a}(o),e),I=!1;break;case"crop":if(!g.x||!g.y){I=!1;break}G=be(this.cropper),d=R.startX-G.left,h=R.startY-G.top,p=n.minWidth,m=n.minHeight,g.x>0?c=g.y>0?lt:ot:g.x<0&&(d-=p,c=g.y>0?ct:st),g.y<0&&(h-=m),this.cropped||(J(this.cropBox,q),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}I&&(n.width=p,n.height=m,n.left=d,n.top=h,this.action=c,this.renderCropBox()),N(o,function(L){L.startX=L.endX,L.startY=L.endY})}},ti={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&O(this.dragBox,bt),J(this.cropBox,q),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=D({},this.initialImageData),this.canvasData=D({},this.initialCanvasData),this.cropBoxData=D({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(D(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),J(this.dragBox,bt),O(this.cropBox,q)),this},replace:function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),a?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,N(this.previews,function(i){i.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,J(this.cropper,jt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,O(this.cropper,jt)),this},destroy:function(){var e=this.element;return e[C]?(e[C]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,s=i.left,n=i.top;return this.moveTo(le(e)?e:s+Number(e),le(a)?a:n+Number(a))},moveTo:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,s=!1;return e=Number(e),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(_(e)&&(i.left=e,s=!0),_(a)&&(i.top=a,s=!0),s&&this.renderCanvas(!0)),this},zoom:function(e,a){var i=this.canvasData;return e=Number(e),this.zoomTo(i.width*(e=e<0?1/(1-e):1+e)/i.naturalWidth,null,a)},zoomTo:function(e,a,i){var s=this.options,n=this.canvasData,o=n.width,c=n.height,u=n.naturalWidth,d=n.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&s.zoomable){var h=u*e,p=d*e;if(!1===Ct(this.element,et,{ratio:e,oldRatio:o/u,originalEvent:i}))return this;if(i){var m=this.pointers,b=be(this.cropper),x=m&&Object.keys(m).length?function Ye(r){var e=0,a=0,i=0;return N(r,function(s){e+=s.startX,a+=s.startY,i+=1}),{pageX:e/=i,pageY:a/=i}}(m):{pageX:i.pageX,pageY:i.pageY};n.left-=(x.pageX-b.left-n.left)/o*(h-o),n.top-=(x.pageY-b.top-n.top)/c*(p-c)}else yt(a)&&_(a.x)&&_(a.y)?(n.left-=(a.x-n.left)/o*(h-o),n.top-=(a.y-n.top)/c*(p-c)):(n.left-=(h-o)/2,n.top-=(p-c)/2);n.width=h,n.height=p,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return _(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var a=this.imageData.scaleY;return this.scale(e,_(a)?a:1)},scaleY:function(e){var a=this.imageData.scaleX;return this.scale(_(a)?a:1,e)},scale:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.imageData,s=!1;return e=Number(e),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(_(e)&&(i.scaleX=e,s=!0),_(a)&&(i.scaleY=a,s=!0),s&&this.renderCanvas(!0,!0)),this},getData:function(){var o,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.options,i=this.imageData,s=this.canvasData,n=this.cropBoxData;if(this.ready&&this.cropped){var c=i.width/i.naturalWidth;if(N(o={x:n.left-s.left,y:n.top-s.top,width:n.width,height:n.height},function(h,p){o[p]=h/c}),e){var u=Math.round(o.y+o.height),d=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=d-o.x,o.height=u-o.y}}else o={x:0,y:0,width:0,height:0};return a.rotatable&&(o.rotate=i.rotate||0),a.scalable&&(o.scaleX=i.scaleX||1,o.scaleY=i.scaleY||1),o},setData:function(e){var a=this.options,i=this.imageData,s=this.canvasData,n={};if(this.ready&&!this.disabled&&yt(e)){var o=!1;a.rotatable&&_(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,o=!0),a.scalable&&(_(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,o=!0),_(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var c=i.width/i.naturalWidth;_(e.x)&&(n.left=e.x*c+s.left),_(e.y)&&(n.top=e.y*c+s.top),_(e.width)&&(n.width=e.width*c),_(e.height)&&(n.height=e.height*c),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?D({},this.containerData):{}},getImageData:function(){return this.sized?D({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,a={};return this.ready&&N(["left","top","width","height","naturalWidth","naturalHeight"],function(i){a[i]=e[i]}),a},setCanvasData:function(e){var a=this.canvasData,i=a.aspectRatio;return this.ready&&!this.disabled&&yt(e)&&(_(e.left)&&(a.left=e.left),_(e.top)&&(a.top=e.top),_(e.width)?(a.width=e.width,a.height=e.width/i):_(e.height)&&(a.height=e.height,a.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var a,e=this.cropBoxData;return this.ready&&this.cropped&&(a={left:e.left,top:e.top,width:e.width,height:e.height}),a||{}},setCropBoxData:function(e){var s,n,a=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&yt(e)&&(_(e.left)&&(a.left=e.left),_(e.top)&&(a.top=e.top),_(e.width)&&e.width!==a.width&&(s=!0,a.width=e.width),_(e.height)&&e.height!==a.height&&(n=!0,a.height=e.height),i&&(s?a.height=a.width/i:n&&(a.width=a.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,i=He(this.image,this.imageData,a,e);if(!this.cropped)return i;var s=this.getData(),n=s.x,o=s.y,c=s.width,u=s.height,d=i.width/Math.floor(a.naturalWidth);1!==d&&(n*=d,o*=d,c*=d,u*=d);var h=c/u,p=rt({aspectRatio:h,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),m=rt({aspectRatio:h,width:e.minWidth||0,height:e.minHeight||0},"cover"),b=rt({aspectRatio:h,width:e.width||(1!==d?i.width:c),height:e.height||(1!==d?i.height:u)}),x=b.width,E=b.height;x=Math.min(p.width,Math.max(m.width,x)),E=Math.min(p.height,Math.max(m.height,E));var y=document.createElement("canvas"),P=y.getContext("2d");y.width=Tt(x),y.height=Tt(E),P.fillStyle=e.fillColor||"transparent",P.fillRect(0,0,x,E);var k=e.imageSmoothingEnabled,G=e.imageSmoothingQuality;P.imageSmoothingEnabled=void 0===k||k,G&&(P.imageSmoothingQuality=G);var H,F,mt,ut,nt,X,R=i.width,g=i.height,T=n,L=o;T<=-c||T>R?(T=0,H=0,mt=0,nt=0):T<=0?(mt=-T,T=0,nt=H=Math.min(R,c+T)):T<=R&&(mt=0,nt=H=Math.min(c,R-T)),H<=0||L<=-u||L>g?(L=0,F=0,ut=0,X=0):L<=0?(ut=-L,L=0,X=F=Math.min(g,u+L)):L<=g&&(ut=0,X=F=Math.min(u,g-L));var S=[T,L,H,F];if(nt>0&&X>0){var gt=x/c;S.push(mt*gt,ut*gt,nt*gt,X*gt)}return P.drawImage.apply(P,[i].concat(t(S.map(function($t){return Math.floor(Tt($t))})))),y},setAspectRatio:function(e){var a=this.options;return!this.disabled&&!le(e)&&(a.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var a=this.options,i=this.dragBox,s=this.face;if(this.ready&&!this.disabled){var n=e===Pt,o=a.movable&&"move"===e;a.dragMode=e=n||o?e:"none",Ut(i,ht,e),At(i,Nt,n),At(i,It,o),a.cropBoxMovable||(Ut(s,ht,e),At(s,Nt,n),At(s,It,o))}return this}},ei=Y.Cropper,Ae=function(){function r(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(te(this,r),!e||!Z.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=D({},ue,yt(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function Rt(r,e,a){return e&&_t(r.prototype,e),a&&_t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r}(r,[{key:"init",value:function(){var s,a=this.element,i=a.tagName.toLowerCase();if(!a[C]){if(a[C]=this,"img"===i){if(this.isImg=!0,s=a.getAttribute("src")||"",this.originalUrl=s,!s)return;s=a.src}else"canvas"===i&&window.HTMLCanvasElement&&(s=a.toDataURL());this.load(s)}}},{key:"load",value:function(a){var i=this;if(a){this.url=a,this.imageData={};var s=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer)return void this.clone();if(v.test(a))return void(l.test(a)?this.read(function Je(r){var e=r.replace(ze,""),a=atob(e),i=new ArrayBuffer(a.length),s=new Uint8Array(i);return N(s,function(n,o){s[o]=a.charCodeAt(o)}),i}(a)):this.clone());var o=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=c,o.onerror=c,o.ontimeout=c,o.onprogress=function(){o.getResponseHeader("content-type")!==dt&&o.abort()},o.onload=function(){i.read(o.response)},o.onloadend=function(){i.reloading=!1,i.xhr=null},n.checkCrossOrigin&&we(a)&&s.crossOrigin&&(a=ye(a)),o.open("GET",a,!0),o.responseType="arraybuffer",o.withCredentials="use-credentials"===s.crossOrigin,o.send()}}},{key:"read",value:function(a){var i=this.options,s=this.imageData,n=Qe(a),o=0,c=1,u=1;if(n>1){this.url=function Xe(r,e){for(var a=[],s=new Uint8Array(r);s.length>0;)a.push(Te.apply(null,ve(s.subarray(0,8192)))),s=s.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(a.join("")))}(a,dt);var d=function Ve(r){var e=0,a=1,i=1;switch(r){case 2:a=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,a=-1;break;case 8:e=-90}return{rotate:e,scaleX:a,scaleY:i}}(n);o=d.rotate,c=d.scaleX,u=d.scaleY}i.rotatable&&(s.rotate=o),i.scalable&&(s.scaleX=c,s.scaleY=u),this.clone()}},{key:"clone",value:function(){var a=this.element,i=this.url,s=a.crossOrigin,n=i;this.options.checkCrossOrigin&&we(i)&&(s||(s="anonymous"),n=ye(i)),this.crossOrigin=s,this.crossOriginUrl=n;var o=document.createElement("img");s&&(o.crossOrigin=s),o.src=n||i,o.alt=a.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),O(o,zt),a.parentNode.insertBefore(o,a.nextSibling)}},{key:"start",value:function(){var a=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var s=Y.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Y.navigator.userAgent),n=function(d,h){D(a.imageData,{naturalWidth:d,naturalHeight:h,aspectRatio:d/h}),a.initialImageData=D({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(!i.naturalWidth||s){var o=document.createElement("img"),c=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),s||c.removeChild(o)},o.src=i.src,s||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",c.appendChild(o))}else n(i.naturalWidth,i.naturalHeight)}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var a=this.element,i=this.options,s=this.image,n=a.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var c=o.querySelector(".".concat(C,"-container")),u=c.querySelector(".".concat(C,"-canvas")),d=c.querySelector(".".concat(C,"-drag-box")),h=c.querySelector(".".concat(C,"-crop-box")),p=h.querySelector(".".concat(C,"-face"));this.container=n,this.cropper=c,this.canvas=u,this.dragBox=d,this.cropBox=h,this.viewBox=c.querySelector(".".concat(C,"-view-box")),this.face=p,u.appendChild(s),O(a,q),n.insertBefore(c,a.nextSibling),J(s,zt),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,O(h,q),i.guides||O(h.getElementsByClassName("".concat(C,"-dashed")),q),i.center||O(h.getElementsByClassName("".concat(C,"-center")),q),i.background&&O(c,"".concat(C,"-bg")),i.highlight||O(p,ne),i.cropBoxMovable&&(O(p,It),Ut(p,ht,"all")),i.cropBoxResizable||(O(h.getElementsByClassName("".concat(C,"-line")),q),O(h.getElementsByClassName("".concat(C,"-point")),q)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),U(i.ready)&&B(a,"ready",i.ready,{once:!0}),Ct(a,"ready")}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),J(this.element,q)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ei,r}},{key:"setDefaults",value:function(a){D(ue,yt(a)&&a)}}]),r}();return D(Ae.prototype,We,Ge,Fe,Ke,$e,ti),Ae}()}}]);